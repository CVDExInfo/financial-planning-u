# Finanzas API Verification Report

> Template generated by `scripts/finanzas-api-verify.sh`. Populate sections with actual command outputs after running the script in an authenticated environment.

## Summary
- **Date Executed:** _YYYY-MM-DD_
- **Environment:** `https://m3g6am67aj.execute-api.us-east-2.amazonaws.com/dev`
- **Region:** `us-east-2`
- **Overall Status:** _Pending/Pass/Fail_
- **Key Findings:**
  - _Add headline successes or failures_

## AWS Context
| Caller Identity | Region | Notes |
| --------------- | ------ | ----- |
| _paste `aws sts get-caller-identity`_ | _value_ | _Any anomalies (e.g., wrong account)_ |

## Endpoint Validation Results
Record both OPTIONS and actual request responses with status color-coding.

| Endpoint | Method | OPTIONS Status | Call Status | Body Snippet | Notes |
| -------- | ------ | -------------- | ----------- | ------------ | ----- |
| /health | GET | _200_ | _200_ | _..._ | _CORS ok?_ |
| /catalog/rubros | GET | _status_ | _status_ | _..._ | |
| /projects | GET | _status_ | _status_ | _..._ | |
| /projects | POST | _status_ | _status_ | _..._ | |
| /baseline | POST | _status_ | _status_ | _..._ | |
| /baseline/{id} | GET | _status_ | _status_ | _..._ | |
| /prefacturas | GET | _status_ | _status_ | _..._ | |
| /prefacturas | POST | _status_ | _status_ | _..._ | |
| /projects/{projectId}/rubros | GET | _status_ | _status_ | _..._ | |
| /projects/{projectId}/rubros | POST | _status_ | _status_ | _..._ | |
| /projects/{projectId}/rubros/{rubroId} | DELETE | _status_ | _status_ | _..._ | |
| /projects/{projectId}/billing | GET | _status_ | _status_ | _..._ | |
| /plan/forecast | GET | _status_ | _status_ | _..._ | |
| /projects/{projectId}/handoff | GET | _status_ | _status_ | _..._ | |
| /projects/{projectId}/handoff | POST | _status_ | _status_ | _..._ | |
| /uploads/docs | POST | _status_ | _status_ | _..._ | _Expect 200/400 but no CORS failure_ |
| /projects/{projectId}/invoices | GET | _status_ | _status_ | _..._ | |
| /projects/{projectId}/invoices/{invoiceId} | GET | _status_ | _status_ | _..._ | |
| /projects/{projectId}/invoices/{invoiceId}/status | PUT | _status_ | _status_ | _..._ | |

## Lambda Integration Mapping
Output from `aws apigatewayv2 get-routes` + `get-integration` per route.

| Method | Path | Lambda | Secured By | CORS | Status |
| ------ | ---- | ------ | ---------- | ---- | ------ |
| _GET_ | _/health_ | _lambda-name_ | _Auth/Cognito/None_ | _Yes/No_ | _OK/Missing_ |
| ... | ... | ... | ... | ... | ... |

### Integration Details
- **API ID:** `m3g6am67aj`
- **Stage:** `dev`
- **Notes:** _Missing integrations, incorrect Lambda ARNs, or mismatched methods_

## DynamoDB Table Health

| Table | Status | ItemCount | Sample Items |
| ----- | ------ | --------- | ------------ |
| FinanzasProjects | _ACTIVE?_ | _count_ | _items_ |
| FinanzasRubros | _status_ | _count_ | _items_ |
| FinanzasPrefacturas | _status_ | _count_ | _items_ |
| FinanzasBaseline | _status_ | _count_ | _items_ |
| FinanzasInvoices | _status_ | _count_ | _items_ |
| FinanzasHandoff | _status_ | _count_ | _items_ |
| _Additional_ | _status_ | _count_ | _items_ |

## S3 Upload Validation
- **Bucket:** `${UPLOAD_BUCKET:-finanzas-sd-documents-dev}`
- **Payload:** Base64-encoded `hello` file
- **Result:** _200/400/no CORS_
- **S3 Listing:** _paste output of `aws s3 ls s3://$UPLOAD_BUCKET`_
- **Notes:** _Confirm correct prefix/object key_

## Cedar Authorization Checks

| Action | Expected | Result |
| ------ | -------- | ------ |
| get /projects | Allow | _decision_ |
| post /projects | Allow | _decision_ |
| get /prefacturas | Allow | _decision_ |
| post /prefacturas | Allow | _decision_ |
| get /plan/forecast | Allow | _decision_ |
| post /uploads/docs | Allow | _decision_ |

## Issues & Follow-ups
- _List any endpoints failing OPTIONS or primary requests_
- _Note Lambda mismatches or missing integrations_
- _Highlight absent DynamoDB tables or throttling_
- _Capture CORS or auth failures_

## Next Steps
- _Actionable items for API owners_
- _Front-end remediation or contract updates_
- _Retest plan_
