---
title: Finanzas SD - CI/CD Pipeline (GitHub Actions + AWS)
description: Multi-stage deployment pipeline with quality gates
---

%%{init: {'theme':'base', 'themeVariables': { 
  'primaryColor':'#2088FF',
  'primaryTextColor':'#fff',
  'primaryBorderColor':'#1a73e8',
  'lineColor':'#545B64',
  'secondaryColor':'#FF9900',
  'tertiaryColor':'#3F8624'
}}}%%

flowchart LR
    %% Source Control
    subgraph SOURCE["üì¶ Source Control"]
        direction TB
        GIT["GitHub Repository<br/>valencia94/financial-planning-u<br/>main, dev, feature branches"]
        PR["Pull Request<br/>Code Review<br/>Branch Protection"]
    end
    
    %% CI Pipeline - Frontend
    subgraph CI_FE["üñ•Ô∏è Frontend CI - GitHub Actions"]
        direction TB
        FE_LINT["Lint & Type Check<br/>ESLint + TypeScript<br/>Vite Build Validation"]
        FE_TEST["Unit Tests<br/>Component Tests<br/>Coverage Reports"]
        FE_BUILD["Production Build<br/>Vite 6 Build<br/>Asset Optimization"]
        FE_SECURITY["Security Scan<br/>npm audit<br/>Dependency Check"]
    end
    
    %% CI Pipeline - Backend
    subgraph CI_BE["‚öôÔ∏è Backend CI - GitHub Actions"]
        direction TB
        BE_VALIDATE["SAM Validate<br/>OpenAPI Lint<br/>Spectral Rules"]
        BE_TEST["Integration Tests<br/>Lambda Tests<br/>API Contract Tests"]
        BE_BUILD["SAM Build<br/>Package Lambdas<br/>Node.js 20.x"]
        BE_SECURITY["Security Scan<br/>CodeQL<br/>Checkov IaC"]
    end
    
    %% CI Pipeline - Docs
    subgraph CI_DOCS["üìÑ Documentation CI"]
        direction TB
        DOCS_VALIDATE["Validate Diagrams<br/>Mermaid Syntax<br/>Check Links"]
        DOCS_RENDER["Render Docs<br/>Mermaid to SVG/PNG<br/>MD to PDF/DOCX"]
        DOCS_PACKAGE["Package for Client<br/>Branded ZIP<br/>Bilingual Output"]
    end
    
    %% Quality Gates
    subgraph GATES["üîí Quality & Security Gates"]
        direction TB
        SAST["SAST Analysis<br/>CodeQL + Snyk<br/>Vulnerability Scan"]
        APPROVAL["Manual Approval<br/>Tech Lead Review<br/>QA Sign-off"]
    end
    
    %% OIDC Auth
    subgraph OIDC["üîê AWS Authentication"]
        direction TB
        OIDC_AUTH["GitHub OIDC<br/>Configure AWS Credentials<br/>Role: OIDC_AWS_ROLE_ARN"]
    end
    
    %% Deployment - Dev
    subgraph DEPLOY_DEV["üöÄ Deploy to DEV (us-east-2)"]
        direction TB
        DEV_FE["S3 Sync Frontend<br/>s3://bucket/finanzas/<br/>CloudFront Invalidation"]
        DEV_BE["SAM Deploy Backend<br/>CloudFormation Stack<br/>Update Lambda + API GW"]
        DEV_SMOKE["Smoke Tests<br/>Health Check<br/>API Contract Validation"]
    end
    
    %% Deployment - Staging
    subgraph DEPLOY_STG["üîÑ Deploy to STAGING"]
        direction TB
        STG_FE["S3 Sync Frontend<br/>Staging Environment<br/>CloudFront Invalidation"]
        STG_BE["SAM Deploy Backend<br/>Staging Stack<br/>Parameter Store Config"]
        STG_TEST["E2E Tests<br/>Postman Collection<br/>Synthetic Monitoring"]
    end
    
    %% Deployment - Production
    subgraph DEPLOY_PROD["‚úÖ Deploy to PRODUCTION"]
        direction TB
        PROD_FE["S3 Sync Frontend<br/>Production Bucket<br/>CloudFront Invalidation"]
        PROD_BE["SAM Deploy Backend<br/>Production Stack<br/>Blue/Green Strategy"]
        PROD_MONITOR["Post-Deploy Monitoring<br/>CloudWatch Alarms<br/>X-Ray Tracing"]
    end
    
    %% Notifications
    subgraph NOTIFY["üîî Notifications"]
        direction TB
        SLACK["GitHub Actions Summary<br/>Job Status<br/>Deployment Results"]
        ROLLBACK["Rollback Strategy<br/>CloudFormation Rollback<br/>S3 Version Restore"]
    end
    
    %% Main Flow
    GIT --> PR
    PR --> FE_LINT & BE_VALIDATE & DOCS_VALIDATE
    
    %% Frontend Pipeline
    FE_LINT --> FE_TEST
    FE_TEST --> FE_BUILD
    FE_BUILD --> FE_SECURITY
    
    %% Backend Pipeline
    BE_VALIDATE --> BE_TEST
    BE_TEST --> BE_BUILD
    BE_BUILD --> BE_SECURITY
    
    %% Docs Pipeline
    DOCS_VALIDATE --> DOCS_RENDER
    DOCS_RENDER --> DOCS_PACKAGE
    
    %% Security Gate
    FE_SECURITY & BE_SECURITY --> SAST
    SAST -.pass.-> OIDC_AUTH
    
    %% Deploy to Dev
    OIDC_AUTH --> DEV_FE & DEV_BE
    FE_BUILD --> DEV_FE
    BE_BUILD --> DEV_BE
    DEV_FE & DEV_BE --> DEV_SMOKE
    
    %% Promote to Staging
    DEV_SMOKE -.success.-> APPROVAL
    APPROVAL -.approved.-> STG_FE & STG_BE
    STG_FE & STG_BE --> STG_TEST
    
    %% Promote to Production
    STG_TEST -.success.-> PROD_FE & PROD_BE
    PROD_FE & PROD_BE --> PROD_MONITOR
    
    %% Notifications & Rollback
    PROD_MONITOR -.success.-> SLACK
    PROD_MONITOR -.failure.-> ROLLBACK
    SAST -.failure.-> SLACK
    
    %% Styling
    classDef ciBlue fill:#2088FF,stroke:#1a73e8,stroke-width:3px,color:#fff,font-weight:bold
    classDef awsOrange fill:#FF9900,stroke:#232F3E,stroke-width:3px,color:#000,font-weight:bold
    classDef securityRed fill:#D13212,stroke:#232F3E,stroke-width:3px,color:#fff,font-weight:bold
    classDef successGreen fill:#3F8624,stroke:#232F3E,stroke-width:3px,color:#fff,font-weight:bold
    
    class FE_LINT,FE_TEST,FE_BUILD,BE_VALIDATE,BE_TEST,BE_BUILD,DOCS_VALIDATE,DOCS_RENDER ciBlue
    class DEV_FE,DEV_BE,STG_FE,STG_BE,PROD_FE,PROD_BE,OIDC_AUTH awsOrange
    class SAST,FE_SECURITY,BE_SECURITY,APPROVAL securityRed
    class DEV_SMOKE,STG_TEST,PROD_MONITOR successGreen
