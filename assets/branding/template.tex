% Finanzas SD – Branded PDF Template (CVDex/Ikusi)
% Usage: pandoc --pdf-engine=xelatex --template=assets/branding/template.tex \
%               --metadata=title:"<Doc Title>" --metadata=logo:"assets/logo/cvdex.png"
\documentclass[11pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{setspace}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage[hidelinks]{hyperref}
\usepackage{titlesec}
\usepackage{longtable}
\usepackage{booktabs}
\usepackage{array}

% ---------- Brand Fonts (fallbacks if not present) ----------
\setmainfont{DejaVu Sans}[
  Path = /usr/share/fonts/truetype/dejavu/,
  Extension = .ttf,
  UprightFont = *,
  BoldFont = *-Bold,
  ItalicFont = *-Oblique,
  BoldItalicFont = *-BoldOblique
]
\setsansfont{DejaVu Sans}
\setmonofont{DejaVu Sans Mono}

% ---------- Brand Palette ----------
% CVDex/Ikusi tonal anchor – adjust if needed
\definecolor{BrandPrimary}{HTML}{0C6E4F} % Ikusi green (#4ac795 is accent), use deeper tone for text rules
\definecolor{BrandAccent}{HTML}{4AC795}
\definecolor{BrandGray}{HTML}{5B6770}

% ---------- Title & Section Styling ----------
\titleformat{\section}{\large\bfseries\color{BrandPrimary}}{\thesection}{0.5em}{}
\titleformat{\subsection}{\normalsize\bfseries\color{BrandPrimary}}{\thesubsection}{0.5em}{}
\titleformat{\subsubsection}{\normalsize\bfseries\color{BrandGray}}{\thesubsubsection}{0.5em}{}

% Syntax highlighting commands (for pandoc compatibility)
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{#1}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{#1}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{#1}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{#1}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{#1}}}}

% Tight lists command for Pandoc
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% ---------- Header / Footer ----------
\pagestyle{fancy}
\fancyhf{}
% Header: logo left, doc title right
$if(logo)$
\lhead{\vspace{-0.5em}\includegraphics[height=14pt]{$logo$}}
$endif$
\rhead{\vspace{-0.5em}\color{BrandGray}\small $title$}
% Footer: bilingual footer + page numbers
\lfoot{\color{BrandGray}\scriptsize Finanzas SD Documentation / Documentación de Finanzas SD}
\rfoot{\color{BrandGray}\scriptsize Page \thepage\ of \pageref{LastPage}}

% ---------- Cover Page ----------
\newcommand{\makemycover}{
  \begin{titlepage}
    \centering
    \vspace*{1.5cm}
    $if(logo)$
    \includegraphics[height=2.2cm]{$logo$}\par
    $endif$
    \vspace{1.5cm}
    {\Huge\bfseries $title$\par}
    \vspace{0.5cm}
    {\Large Finanzas SD – Architecture, Flows \& SOPs \par}
    \vspace{0.25cm}
    {\large Arquitectura, Flujos y Procedimientos \par}
    \vfill
    {\large \today \par}
  \end{titlepage}
}

% ---------- Pandoc Variables ----------
\newcommand{\thetitle}{$title$}

% ---------- Document ----------
\begin{document}
\makemycover
\onehalfspacing

$if(toc)$
{\hypersetup{linkcolor=BrandPrimary}
\tableofcontents
\newpage}
$endif$

$body$

\end{document}
