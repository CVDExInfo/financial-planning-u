{
  "info": {
    "_postman_id": "finanzas-sd-api-contracts",
    "name": "Finanzas SD - API Contract Tests",
    "description": "Contract tests for Finanzas Service Delivery API with no-fallback guard for DEFAULT data markers",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Pre-request script runs before each request",
          "// Ensures access_token is available for authenticated endpoints",
          "if (!pm.environment.get('access_token')) {",
          "    console.log('Warning: access_token not set. Authentication will fail for protected endpoints.');",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Global test script - runs after every request",
          "// NO DEFAULT FALLBACK GUARD - fails tests if response contains mock data markers",
          "",
          "const body = pm.response.text();",
          "const forbiddenMarkers = [",
          "    'DEFAULT (healthcare)',",
          "    'Returning DEFAULT',",
          "    'DEFAULT_FALLBACK',",
          "    'MOCK_DATA'",
          "];",
          "",
          "forbiddenMarkers.forEach(marker => {",
          "    pm.test(`Response must not contain fallback marker: ${marker}`, function () {",
          "        if (body.includes(marker)) {",
          "            console.error(`FAILED: Found forbidden marker '${marker}' in response`);",
          "            console.error(`Endpoint: ${pm.request.url.toString()}`);",
          "            console.error(`Response preview: ${body.substring(0, 200)}...`);",
          "        }",
          "        pm.expect(body.includes(marker), `Found '${marker}' in response - mock/DEFAULT data detected`).to.be.false;",
          "    });",
          "});"
        ]
      }
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Get Cognito JWT",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "// This request handles authentication and stores tokens",
                  "// In CI, tokens are pre-generated by GitHub Actions",
                  "// For local testing, implement Cognito token flow here",
                  "",
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "// Parse and store tokens if response contains them",
                  "if (pm.response.code === 200) {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.access_token) {",
                  "        pm.environment.set('access_token', jsonData.access_token);",
                  "        pm.environment.set('id_token', jsonData.id_token || '');",
                  "        console.log('Access token stored successfully');",
                  "    }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-amz-json-1.1",
                "type": "text"
              },
              {
                "key": "X-Amz-Target",
                "value": "AWSCognitoIdentityProviderService.InitiateAuth",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"AuthFlow\": \"USER_PASSWORD_AUTH\",\n    \"ClientId\": \"{{cognito_client_id}}\",\n    \"AuthParameters\": {\n        \"USERNAME\": \"{{username}}\",\n        \"PASSWORD\": \"{{password}}\"\n    }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "https://cognito-idp.{{aws_region}}.amazonaws.com/",
              "protocol": "https",
              "host": [
                "cognito-idp",
                "{{aws_region}}",
                "amazonaws",
                "com"
              ],
              "path": [
                ""
              ]
            },
            "description": "Authenticates with AWS Cognito to obtain JWT tokens. In GitHub Actions CI, tokens are pre-generated by cognito-generate-jwt action."
          },
          "response": []
        }
      ],
      "description": "Authentication requests for obtaining Cognito JWT tokens"
    },
    {
      "name": "Health",
      "item": [
        {
          "name": "GET /health",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response time is acceptable (< 8000ms)\", function () {",
                  "    pm.expect(pm.response.responseTime).to.be.below(8000);",
                  "});",
                  "",
                  "pm.test(\"Health payload schema\", function () {",
                  "    const json = pm.response.json();",
                  "    ",
                  "    // Canonical requirement: ok flag must exist and be true",
                  "    pm.expect(json).to.have.property(\"ok\");",
                  "    pm.expect(json.ok).to.be.true;",
                  "    ",
                  "    // Optional: if a status field is present, assert it is meaningful",
                  "    if (json.status !== undefined) {",
                  "        pm.expect(json.status).to.be.oneOf([\"ok\", \"UP\", \"healthy\"]);",
                  "    }",
                  "    ",
                  "    // Optional: basic metadata checks if present",
                  "    if (json.env !== undefined) {",
                  "        pm.expect(json.env).to.be.a(\"string\");",
                  "    }",
                  "    if (json.version !== undefined) {",
                  "        pm.expect(json.version).to.be.a(\"string\");",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "health"
              ]
            },
            "description": "Health check endpoint - no authentication required"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Catalog",
      "item": [
        {
          "name": "GET /catalog/rubros",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has data array', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "    pm.expect(jsonData.data).to.be.an('array');",
                  "});",
                  "",
                  "pm.test('Rubros catalog is not empty', function () {",
                  "    const jsonData = pm.response.json();",
                  "    pm.expect(jsonData.data.length).to.be.above(0);",
                  "});",
                  "",
                  "pm.test('Each rubro has required fields', function () {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.data.length > 0) {",
                  "        const rubro = jsonData.data[0];",
                  "        pm.expect(rubro).to.have.property('rubro_id');",
                  "        pm.expect(rubro).to.have.property('nombre');",
                  "    }",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/catalog/rubros",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "catalog",
                "rubros"
              ]
            },
            "description": "Get catalog of service rubros (budget line items)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Projects",
      "item": [
        {
          "name": "GET /projects",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test(\"Status code is 200 or 501\", function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test(\"Projects payload shape\", function () {",
                  "        const json = pm.response.json();",
                  "",
                  "        // Allow both array and envelope forms",
                  "        const projects = Array.isArray(json) ? json : json.data;",
                  "",
                  "        pm.expect(projects, \"projects array\").to.be.an(\"array\");",
                  "        pm.expect(projects.length, \"projects length\").to.be.above(0);",
                  "",
                  "        projects.forEach((p, idx) => {",
                  "            pm.expect(p, `project[${idx}]`).to.be.an(\"object\");",
                  "",
                  "            // We know from current payload that `fecha_fin` exists.",
                  "            pm.expect(p).to.have.property(\"fecha_fin\");",
                  "",
                  "            // Be flexible about the identifier field for now:",
                  "            const id =",
                  "                p.id ||",
                  "                p.projectId ||",
                  "                p.project_id ||",
                  "                p.id_proyecto ||",
                  "                p.pk || // e.g. DDB PK",
                  "                null;",
                  "",
                  "            pm.expect(id, `project[${idx}] identifier`).to.exist;",
                  "        });",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects?limit=20",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects"
              ],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            },
            "description": "List all projects"
          },
          "response": []
        },
        {
          "name": "GET /projects/{projectId}",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 404, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has project properties', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('id');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}"
              ]
            },
            "description": "Get specific project by ID"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Forecast",
      "item": [
        {
          "name": "GET /plan/forecast",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Forecast response structure', function () {",
                  "        const json = pm.response.json();",
                  "        ",
                  "        // Response should have data array",
                  "        pm.expect(json).to.have.property('data');",
                  "        pm.expect(json.data).to.be.an('array');",
                  "        ",
                  "        // Should have metadata",
                  "        pm.expect(json).to.have.property('projectId');",
                  "        pm.expect(json).to.have.property('months');",
                  "        ",
                  "        // Array length can be 0 (no data yet) or more",
                  "        pm.expect(json.data.length).to.be.at.least(0);",
                  "    });",
                  "    ",
                  "    pm.test('No fallback markers in forecast response', function () {",
                  "        const body = pm.response.text();",
                  "        pm.expect(body).to.not.include('DEFAULT (healthcare)');",
                  "        pm.expect(body).to.not.include('DEFAULT_FALLBACK');",
                  "        pm.expect(body).to.not.include('MOCK_DATA');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/plan/forecast?projectId={{projectId_seed}}&months=6",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "plan",
                "forecast"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                },
                {
                  "key": "months",
                  "value": "6"
                }
              ]
            },
            "description": "Get forecast data for a project over a specified number of months"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Prefacturas",
      "item": [
        {
          "name": "GET /prefacturas",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200', function () {",
                  "    pm.expect(pm.response.code).to.equal(200);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Prefacturas response structure', function () {",
                  "        const json = pm.response.json();",
                  "        ",
                  "        // Response should have data array",
                  "        pm.expect(json).to.have.property('data');",
                  "        pm.expect(json.data).to.be.an('array');",
                  "        ",
                  "        // Should have metadata",
                  "        pm.expect(json).to.have.property('projectId');",
                  "        pm.expect(json).to.have.property('total');",
                  "        ",
                  "        // Array length can be 0 (no data yet) or more",
                  "        pm.expect(json.data.length).to.be.at.least(0);",
                  "    });",
                  "    ",
                  "    pm.test('No fallback markers in prefacturas response', function () {",
                  "        const body = pm.response.text();",
                  "        pm.expect(body).to.not.include('DEFAULT (healthcare)');",
                  "        pm.expect(body).to.not.include('DEFAULT_FALLBACK');",
                  "        pm.expect(body).to.not.include('MOCK_DATA');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/prefacturas?projectId={{projectId_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "prefacturas"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                }
              ]
            },
            "description": "Get pre-invoices (prefacturas) for a project"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Handoff",
      "item": [
        {
          "name": "GET /projects/{projectId}/handoff",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 404, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has handoff properties', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('handoffId');",
                  "        pm.expect(jsonData).to.have.property('projectId');",
                  "        pm.expect(jsonData).to.have.property('fields');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}/handoff",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}",
                "handoff"
              ]
            },
            "description": "Get handoff record for a project"
          },
          "response": []
        },
        {
          "name": "POST /projects/{projectId}/handoff",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 201, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "    pm.test('Response has handoffId', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('handoffId');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-Idempotency-Key",
                "value": "{{$guid}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"baseline_id\": \"{{baseline_id_seed}}\",\n    \"owner\": \"test@example.com\",\n    \"project_name\": \"Contract Test Project\",\n    \"client_name\": \"Test Client Corp\",\n    \"currency\": \"USD\",\n    \"start_date\": \"2025-01-01\",\n    \"duration_months\": 12,\n    \"fields\": {\n        \"mod_total\": 1500000,\n        \"pct_ingenieros\": 65,\n        \"pct_sdm\": 35,\n        \"notes\": \"Contract test handoff\"\n    }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}/handoff",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}",
                "handoff"
              ]
            },
            "description": "Create or update handoff for a project"
          },
          "response": []
        },
        {
          "name": "PUT /handoff/{handoffId}",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 404, 412, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404, 412, 501]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"projectId\": \"{{projectId_seed}}\",\n    \"fields\": {\n        \"mod_total\": 1600000,\n        \"pct_ingenieros\": 70,\n        \"pct_sdm\": 30,\n        \"notes\": \"Updated handoff\"\n    },\n    \"version\": 1\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/handoff/{{handoffId_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "handoff",
                "{{handoffId_seed}}"
              ]
            },
            "description": "Update existing handoff by ID"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Project Rubros",
      "item": [
        {
          "name": "POST /projects/{projectId}/rubros",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 201, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 501]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"rubroIds\": [\"R-IKUSI-GO\", \"R-IKUSI-GOLD\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}/rubros",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}",
                "rubros"
              ]
            },
            "description": "Attach rubros to a project"
          },
          "response": []
        },
        {
          "name": "GET /projects/{projectId}/rubros",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has data array', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('data');",
                  "        pm.expect(jsonData.data).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}/rubros",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}",
                "rubros"
              ]
            },
            "description": "Get rubros attached to a project"
          },
          "response": []
        },
        {
          "name": "DELETE /projects/{projectId}/rubros/{rubroId}",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 404, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 404, 501]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/projects/{{projectId_seed}}/rubros/R-IKUSI-GO",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "projects",
                "{{projectId_seed}}",
                "rubros",
                "R-IKUSI-GO"
              ]
            },
            "description": "Detach a rubro from a project"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Allocations",
      "item": [
        {
          "name": "GET /allocations",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response is valid', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.be.an('object');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/allocations?projectId={{projectId_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allocations"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                }
              ]
            },
            "description": "Get allocations for a project"
          },
          "response": []
        },
        {
          "name": "GET /allocation-rules",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has data array', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('data');",
                  "        pm.expect(jsonData.data).to.be.an('array');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/allocation-rules",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "allocation-rules"
              ]
            },
            "description": "Get allocation rules"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Payroll",
      "item": [
        {
          "name": "GET /payroll/actuals",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 400, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has data property', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('data');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/payroll/actuals?projectId={{projectId_seed}}&month={{month_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "payroll",
                "actuals"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                },
                {
                  "key": "month",
                  "value": "{{month_seed}}"
                }
              ]
            },
            "description": "Get payroll actuals for a project and month"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Recon",
      "item": [
        {
          "name": "GET /recon",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 400, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 400, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has expected structure', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.be.an('object');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/recon?projectId={{projectId_seed}}&month={{month_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "recon"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                },
                {
                  "key": "month",
                  "value": "{{month_seed}}"
                }
              ]
            },
            "description": "Get reconciliation data for a project and month"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Adjustments",
      "item": [
        {
          "name": "POST /adjustments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200, 201, 400, or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 201, 400, 501]);",
                  "});"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"project_id\": \"{{projectId_seed}}\",\n    \"type\": \"reallocation\",\n    \"amount\": 1000,\n    \"reason\": \"Contract test adjustment\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/adjustments",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "adjustments"
              ]
            },
            "description": "Create a budget adjustment"
          },
          "response": []
        },
        {
          "name": "GET /adjustments",
          "event": [
            {
              "listen": "test",
              "script": {
                "type": "text/javascript",
                "exec": [
                  "pm.test('Status code is 200 or 501', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([200, 501]);",
                  "});",
                  "",
                  "if (pm.response.code === 200) {",
                  "    pm.test('Response has data property', function () {",
                  "        const jsonData = pm.response.json();",
                  "        pm.expect(jsonData).to.have.property('data');",
                  "    });",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/adjustments?projectId={{projectId_seed}}",
              "host": [
                "{{baseUrl}}"
              ],
              "path": [
                "adjustments"
              ],
              "query": [
                {
                  "key": "projectId",
                  "value": "{{projectId_seed}}"
                }
              ]
            },
            "description": "Get adjustments for a project"
          },
          "response": []
        }
      ]
    }
  ]
}